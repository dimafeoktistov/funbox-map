(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{136:function(e,t,a){e.exports=a(330)},145:function(e,t,a){},146:function(e,t,a){},315:function(e,t,a){},316:function(e,t,a){},330:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"mapReducer",function(){return Oe}),a.d(n,"placesListReducer",function(){return Ee});var r={};a.r(r),a.d(r,"mapSaga",function(){return Se});var c=a(0),o=a.n(c),i=a(21),s=a.n(i),l=a(66),u=(a(145),a(32)),d=Object(u.a)(function(e){return e.mapReducer.loading},function(e){return e}),p=Object(u.a)(function(e){return e.mapReducer.snackBar},function(e){return e}),f=Object(u.a)(function(e){return e.mapReducer.map},function(e){return e}),m=Object(u.a)(function(e){return e.mapReducer.polyLine},function(e){return e}),b=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var c={type:e};return a.forEach(function(e,t){c[a[t]]=n[t]}),c}},O=b("app/CREATE_MAP","payload"),E=(b("app/ADD_ROUTE","payload"),"app/INIT_MAP"),g=b(E),j="app/UPDATE_POLYLINE",v=b(j),y=b("app/SET_LOADING"),h=b("app/SET_SNAPBAR","payload"),P=Object(u.a)(function(e){return e.placesListReducer.placesList},function(e){return e}),x=Object(u.a)(function(e){return e.placesListReducer.placesList},function(e){return e.map(function(e){return e.coords})}),w="app/ADD_PLACE",L=b(w,"payload"),A="app/DELETE_PLACE",k=b(A,"payload"),C=b("app/SAVE_PLACE","payload"),R=b("app/UPDATE_PLACE","payload"),_="app/REORDER_PLACES",D=b(_,"payload"),S=a(129),N=a.n(S),T=a(131),B=a.n(T),I=a(132),M=a.n(I),W=a(33),F=a.n(W),U=a(30),H=a.n(U),z=a(130),G=a.n(z),J=a(128),V=a.n(J),q=a(67),X=a(68),Y=a(46),$=a(64),K=a.n($),Q=a(124),Z=a.n(Q),ee=(a(146),function(e){var t=e.addPlace,a=Object(X.a)(e,["addPlace"]),n=Object(c.useState)(""),r=Object(q.a)(n,2),i=r[0],s=r[1];return o.a.createElement("form",Object.assign({onSubmit:function(e){e.preventDefault(),t(i),s("")}},a,{className:"form"}),o.a.createElement(Z.a,{id:"place",label:"\u041c\u0435\u0441\u0442\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043c\u0435\u0441\u0442\u043e",className:"search",onChange:function(e){return s(e.target.value)},value:i,required:!0}),o.a.createElement(K.a,{variant:"contained",color:"primary",type:"submit",className:"button",style:{marginLeft:"10px"}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))}),te={display:"flex",justifyContent:"space-between",alignItems:"center",padding:10,marginBottom:10},ae=function(e){var t=e.place,a=e.deletePlace,n=e.index,r=function(){return a(t)};return o.a.createElement(Y.b,{key:t.id,draggableId:t.id,index:n},function(e){return o.a.createElement("li",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps),o.a.createElement(H.a,{style:te},o.a.createElement(F.a,{component:"p",style:{maxWidth:"75%"}},t.name),o.a.createElement(K.a,{type:"button",style:{width:"20%"},onClick:r,variant:"contained",color:"secondary"},"x")))})},ne=(a(315),{marginRight:20,padding:15,maxHeight:"90vh",overflowX:"scroll",minWidth:350,maxWidth:350}),re=function(e){var t=e.places,a=e.addPlace,n=e.deletePlace,r=e.reorderPlaces,c=Object(X.a)(e,["places","addPlace","deletePlace","reorderPlaces"]);return o.a.createElement(H.a,Object.assign({},c,{style:ne}),o.a.createElement(ee,{addPlace:a}),o.a.createElement(Y.a,{onDragEnd:function(e){var a=e.destination,n=e.source;if(a&&a.index!==n.index){var c=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),c=Object(q.a)(r,1)[0];return n.splice(a,0,c),n}(t,n.index,a.index);r(c)}}},o.a.createElement(Y.c,{droppableId:"droppable"},function(e){return o.a.createElement("ul",Object.assign({},e.droppableProps,{ref:e.innerRef}),t.map(function(e,t){return o.a.createElement(ae,{place:e,key:e.id,deletePlace:n,index:t})}),e.placeholder,0===t.length&&o.a.createElement(F.a,{component:"p"},"\u041f\u043e\u043a\u0430 \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u043c\u0430\u0440\u043a\u0435\u0440\u0430"))})))},ce=window.ymaps,oe=(a(316),Object(l.b)(function(e){return{placesList:P(e),loading:d(e),snackBar:p(e)}},function(e){return{initMap:function(){e(g())},addPlace:function(t){e(L(t))},deletePlace:function(t){e(k(t))},reorderPlaces:function(t){e(D(t))},handleClose:function(t){e(h(t))}}})(function(e){var t=e.initMap,a=e.addPlace,n=e.placesList,r=e.deletePlace,i=e.reorderPlaces,s=e.loading,l=e.snackBar,u=e.handleClose;Object(c.useEffect)(function(){window.addEventListener("load",d)},[]);var d=function(){ce.ready(function(){t()})};return o.a.createElement(o.a.Fragment,null,o.a.createElement(V.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:l.open,ContentProps:{"aria-describedby":"message-id"},onClose:function(){return u({open:!1,message:""})},autoHideDuration:3e3,message:o.a.createElement("span",{id:"message-id"},l.message)}),o.a.createElement(N.a,null),s&&o.a.createElement("div",{className:"spinner"},o.a.createElement(G.a,null)),o.a.createElement("div",{className:"App"},o.a.createElement(B.a,{position:"static",color:"default"},o.a.createElement(M.a,null,o.a.createElement(F.a,{variant:"h4",color:"inherit"},"\u0422\u0435\u0441\u0442\u043e\u0432\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 \u0434\u043b\u044f FunBox."))),o.a.createElement("div",{className:"container"},o.a.createElement(re,{places:n,addPlace:a,deletePlace:r,reorderPlaces:i}),o.a.createElement(H.a,{id:"map"}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ie,se,le=a(20),ue=a(133),de=a(134),pe=a(135),fe=a(23),me=a(27),be=function(e,t){return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1?arguments[1]:void 0;return t.hasOwnProperty(n.type)?t[n.type](a,n):a}},Oe=be({map:null,polyLine:null,loading:!0,snackBar:{open:!1,message:null}},(ie={},Object(fe.a)(ie,"app/CREATE_MAP",function(e,t){var a=t.payload,n=a.map,r=a.polyLine;return Object(me.a)({},e,{map:n,polyLine:r})}),Object(fe.a)(ie,"app/SET_LOADING",function(e){return Object(me.a)({},e,{loading:!1})}),Object(fe.a)(ie,"app/SET_SNAPBAR",function(e,t){var a=t.payload;return Object(me.a)({},e,{snackBar:a})}),ie)),Ee=be({placesList:[]},(se={},Object(fe.a)(se,"app/SAVE_PLACE",function(e,t){var a=t.payload;return Object(me.a)({},e,{placesList:e.placesList.concat(a)})}),Object(fe.a)(se,A,function(e,t){var a=t.payload;return Object(me.a)({},e,{placesList:e.placesList.filter(function(e){return e.id!==a.id})})}),Object(fe.a)(se,"app/UPDATE_PLACE",function(e,t){var a=t.payload,n=a.id,r=a.coords;return Object(me.a)({},e,{placesList:e.placesList.map(function(e){return e.id===n?Object(me.a)({},e,{coords:r}):e})})}),Object(fe.a)(se,_,function(e,t){var a=t.payload;return Object(me.a)({},e,{placesList:a})}),se)),ge=Object(le.c)(n),je=a(25),ve=a.n(je),ye=a(19),he=ve.a.mark(ke),Pe=ve.a.mark(Re),xe=ve.a.mark(_e),we=ve.a.mark(De),Le=ve.a.mark(Se),Ae=function(){return Math.random().toString(36).substr(2,9)};function ke(){var e,t;return ve.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=new ce.Map("map",{center:[55.75,37.57],zoom:9}),t=new ce.Polyline([],{},{strokeWidth:2,strokeColor:"#0000FF"}),e.geoObjects.add(t),a.next=5,Object(ye.c)(O({map:e,polyLine:t}));case 5:return a.next=7,Object(ye.c)(y());case 7:case"end":return a.stop()}},he,this)}function Ce(e){var t=e.get("target"),a=t.properties.get("id"),n=t.geometry.getCoordinates();Te.dispatch(R({id:a,coords:n})),Te.dispatch(v())}function Re(e){var t,a,n,r,c,o,i,s;return ve.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return t=Ae(),l.next=3,Object(ye.d)(f);case 3:return a=l.sent,l.next=6,Object(ye.d)(P);case 6:if(n=l.sent,console.log(n),r=e.payload,c=a.getCenter(),o=n.find(function(e){return e.name.toLowerCase()===r.toLowerCase()}),!n.find(function(e){return e.coords[0]===c[0]&&e.coords[1]===c[1]})){l.next=17;break}return l.next=15,Object(ye.c)(h({open:!0,message:"\u0422\u043e\u0447\u043a\u0430 \u0441 \u0442\u0430\u043a\u0438\u043c\u0438 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u0430\u043c\u0438 \u0443\u0436\u0435 \u0435\u0441\u0442\u044c!"}));case 15:l.next=30;break;case 17:if(!o){l.next=22;break}return l.next=20,Object(ye.c)(h({open:!0,message:"\u0422\u043e\u0447\u043a\u0430 \u0441 \u0442\u0430\u043a\u0438\u043c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c \u0443\u0436\u0435 \u0435\u0441\u0442\u044c!"}));case 20:l.next=30;break;case 22:return(i=new ce.Placemark(c,{balloonContent:r,id:t},{draggable:!0,preset:"islands#whiteStretchyIcon"})).events.add("dragend",Ce),s={name:r,coords:c,id:t,placemark:i},l.next=27,Object(ye.c)(C(s));case 27:return a.geoObjects.add(i),l.next=30,Object(ye.b)(De);case 30:case"end":return l.stop()}},Pe,this)}function _e(e){var t,a;return ve.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(ye.d)(f);case 2:return t=n.sent,a=e.payload,n.next=6,t.geoObjects.remove(a.placemark);case 6:return n.next=8,Object(ye.b)(De);case 8:case"end":return n.stop()}},xe,this)}function De(){var e;return ve.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ye.d)(x);case 2:return e=t.sent,t.next=5,Object(ye.d)(m);case 5:t.sent.geometry.setCoordinates(e);case 7:case"end":return t.stop()}},we,this)}function Se(){return ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ye.a)([Object(ye.e)(w,Re),Object(ye.e)(A,_e),Object(ye.e)(_,De),Object(ye.e)(E,ke),Object(ye.e)(j,De)]);case 2:case"end":return e.stop()}},Le,this)}var Ne=Object(ue.createLogger)({reducer:ge}),Te=function(){var e=Object(pe.a)(),t=[e,de.a,Ne],a=[le.a.apply(void 0,t)],n=le.d.apply(void 0,a),c=Object(le.e)(ge,{},n);return function(e){Object.values(r).forEach(e.run.bind(e))}(e),c}();s.a.render(o.a.createElement(l.a,{store:Te},o.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[136,1,2]]]);
//# sourceMappingURL=main.e9d2b324.chunk.js.map