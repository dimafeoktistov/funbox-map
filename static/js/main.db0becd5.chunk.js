(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{135:function(e,a,t){e.exports=t(329)},144:function(e,a,t){},145:function(e,a,t){},314:function(e,a,t){},315:function(e,a,t){},329:function(e,a,t){"use strict";t.r(a);var n={};t.r(n),t.d(n,"mapReducer",function(){return le}),t.d(n,"placesListReducer",function(){return de});var r={};t.r(r),t.d(r,"mapSaga",function(){return we});var c=t(0),o=t.n(c),i=t(21),s=t.n(i),l=t(65),d=(t(144),t(128)),p=t.n(d),u=t(130),m=t.n(u),f=t(131),b=t.n(f),E=t(32),g=t.n(E),v=t(30),O=t.n(v),y=t(129),j=t.n(y),h=t(127),P=t.n(h),L=function(e){for(var a=arguments.length,t=new Array(a>1?a-1:0),n=1;n<a;n++)t[n-1]=arguments[n];return function(){for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];var c={type:e};return t.forEach(function(e,a){c[t[a]]=n[a]}),c}},x=L("app/CREATE_MAP","payload"),w=(L("app/ADD_ROUTE","payload"),"app/INIT_MAP"),A=L(w),k="app/UPDATE_POLYLINE",C=L(k),R=L("app/SET_LOADING"),_=L("app/SET_SNAPBAR","payload"),D="app/ADD_PLACE",S=L(D,"payload"),N="app/DELETE_PLACE",T=L(N,"payload"),B=L("app/SAVE_PLACE","payload"),I=L("app/UPDATE_PLACE","payload"),M="app/REORDER_PLACES",W=L(M,"payload"),F=t(66),U=t(67),H=t(45),z=t(63),G=t.n(z),J=t(123),V=t.n(J),q=(t(145),function(e){var a=e.addPlace,t=Object(U.a)(e,["addPlace"]),n=Object(c.useState)(""),r=Object(F.a)(n,2),i=r[0],s=r[1];return o.a.createElement("form",Object.assign({onSubmit:function(e){e.preventDefault(),a(i),s("")}},t,{className:"form"}),o.a.createElement(V.a,{id:"place",label:"\u041c\u0435\u0441\u0442\u043e \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043c\u0435\u0441\u0442\u043e",className:"search",onChange:function(e){return s(e.target.value)},value:i,required:!0}),o.a.createElement(G.a,{variant:"contained",color:"primary",type:"submit",className:"button",style:{marginLeft:"10px"}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))}),X={display:"flex",justifyContent:"space-between",alignItems:"center",padding:10,marginBottom:10},Y=function(e){var a=e.place,t=e.deletePlace,n=e.index,r=function(){return t(a)};return o.a.createElement(H.b,{key:a.id,draggableId:a.id,index:n},function(e){return o.a.createElement("li",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps),o.a.createElement(O.a,{style:X},o.a.createElement(g.a,{component:"p",style:{maxWidth:"75%"}},a.name),o.a.createElement(G.a,{type:"button",style:{width:"25%"},onClick:r,variant:"contained",color:"secondary"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))})},$=(t(314),{marginRight:20,padding:15,maxHeight:"90vh",overflowX:"scroll",minWidth:350,maxWidth:350}),K=function(e){var a=e.places,t=e.addPlace,n=e.deletePlace,r=e.reorderPlaces,c=Object(U.a)(e,["places","addPlace","deletePlace","reorderPlaces"]);return o.a.createElement(O.a,Object.assign({},c,{style:$}),o.a.createElement(q,{addPlace:t}),o.a.createElement(H.a,{onDragEnd:function(e){var t=e.destination,n=e.source;if(t&&t.index!==n.index){var c=function(e,a,t){var n=Array.from(e),r=n.splice(a,1),c=Object(F.a)(r,1)[0];return n.splice(t,0,c),n}(a,n.index,t.index);r(c)}}},o.a.createElement(H.c,{droppableId:"droppable"},function(e){return o.a.createElement("ul",Object.assign({},e.droppableProps,{ref:e.innerRef}),a.map(function(e,a){return o.a.createElement(Y,{place:e,key:e.id,deletePlace:n,index:a})}),e.placeholder,0===a.length&&o.a.createElement(g.a,{component:"p"},"\u041f\u043e\u043a\u0430 \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u043c\u0430\u0440\u043a\u0435\u0440\u0430"))})))},Q=window.ymaps,Z=(t(315),Object(l.b)(function(e){var a=e.placesListReducer.placesList,t=e.mapReducer;return{placesList:a,loading:t.loading,snackBar:t.snackBar}},function(e){return{initMap:function(){e(A())},addPlace:function(a){e(S(a))},deletePlace:function(a){e(T(a))},reorderPlaces:function(a){e(W(a))},handleClose:function(a){e(_(a))}}})(function(e){var a=e.initMap,t=e.addPlace,n=e.placesList,r=e.deletePlace,i=e.reorderPlaces,s=e.loading,l=e.snackBar,d=e.handleClose;Object(c.useEffect)(function(){window.addEventListener("load",u)},[]);var u=function(){Q.ready(function(){a()})};return o.a.createElement(o.a.Fragment,null,o.a.createElement(P.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:l.open,ContentProps:{"aria-describedby":"message-id"},onClose:function(){return d({open:!1,message:""})},autoHideDuration:3e3,message:o.a.createElement("span",{id:"message-id"},l.message)}),o.a.createElement(p.a,null),s&&o.a.createElement("div",{className:"spinner"},o.a.createElement(j.a,null)),o.a.createElement("div",{className:"App"},o.a.createElement(m.a,{position:"static",color:"default"},o.a.createElement(b.a,null,o.a.createElement(g.a,{variant:"h4",color:"inherit"},"\u0422\u0435\u0441\u0442\u043e\u0432\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435 \u0434\u043b\u044f FunBox."))),o.a.createElement("div",{className:"container"},o.a.createElement(K,{places:n,addPlace:t,deletePlace:r,reorderPlaces:i}),o.a.createElement(O.a,{id:"map"}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ee,ae,te=t(20),ne=t(132),re=t(133),ce=t(134),oe=t(23),ie=t(27),se=function(e,a){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1?arguments[1]:void 0;return a.hasOwnProperty(n.type)?a[n.type](t,n):t}},le=se({map:null,polyLine:null,loading:!0,snackBar:{open:!1,message:null}},(ee={},Object(oe.a)(ee,"app/CREATE_MAP",function(e,a){var t=a.payload,n=t.map,r=t.polyLine;return Object(ie.a)({},e,{map:n,polyLine:r})}),Object(oe.a)(ee,"app/SET_LOADING",function(e){return Object(ie.a)({},e,{loading:!1})}),Object(oe.a)(ee,"app/SET_SNAPBAR",function(e,a){var t=a.payload;return Object(ie.a)({},e,{snackBar:t})}),ee)),de=se({placesList:[]},(ae={},Object(oe.a)(ae,"app/SAVE_PLACE",function(e,a){var t=a.payload;return Object(ie.a)({},e,{placesList:e.placesList.concat(t)})}),Object(oe.a)(ae,N,function(e,a){var t=a.payload;return Object(ie.a)({},e,{placesList:e.placesList.filter(function(e){return e.id!==t.id})})}),Object(oe.a)(ae,"app/UPDATE_PLACE",function(e,a){var t=a.payload,n=t.id,r=t.coords;return Object(ie.a)({},e,{placesList:e.placesList.map(function(e){return e.id===n?Object(ie.a)({},e,{coords:r}):e})})}),Object(oe.a)(ae,M,function(e,a){var t=a.payload;return Object(ie.a)({},e,{placesList:t})}),ae)),pe=Object(te.c)(n),ue=t(25),me=t.n(ue),fe=t(19),be=me.a.mark(je),Ee=me.a.mark(Pe),ge=me.a.mark(Le),ve=me.a.mark(xe),Oe=me.a.mark(we),ye=function(){return Math.random().toString(36).substr(2,9)};function je(){var e,a;return me.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Q.Map("map",{center:[55.75,37.57],zoom:9}),a=new Q.Polyline([],{},{strokeWidth:2,strokeColor:"#0000FF"}),e.geoObjects.add(a),t.next=5,Object(fe.c)(x({map:e,polyLine:a}));case 5:return t.next=7,Object(fe.c)(R());case 7:case"end":return t.stop()}},be,this)}function he(e){var a=e.get("target"),t=a.properties.get("id"),n=a.geometry.getCoordinates();ke.dispatch(I({id:t,coords:n})),ke.dispatch(C())}function Pe(e){var a,t,n,r,c,o,i,s,l,d,p;return me.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=ye(),u.next=3,Object(fe.d)(function(e){return e.mapReducer});case 3:return t=u.sent,n=t.map,u.next=7,Object(fe.d)(function(e){return e.placesListReducer});case 7:if(r=u.sent,c=r.placesList,o=e.payload,i=n.getCenter(),s=c.find(function(e){return e.name===o}),l=c.find(function(e){return e.coords[0]===i[0]&&e.coords[1]===i[1]}),console.log(l),!l){u.next=19;break}return u.next=17,Object(fe.c)(_({open:!0,message:"\u0422\u043e\u0447\u043a\u0430 \u0441 \u0442\u0430\u043a\u0438\u043c\u0438 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u0430\u043c\u0438 \u0443\u0436\u0435 \u0435\u0441\u0442\u044c!"}));case 17:u.next=32;break;case 19:if(!s){u.next=24;break}return u.next=22,Object(fe.c)(_({open:!0,message:"\u0422\u043e\u0447\u043a\u0430 \u0441 \u0442\u0430\u043a\u0438\u043c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c \u0443\u0436\u0435 \u0435\u0441\u0442\u044c!"}));case 22:u.next=32;break;case 24:return(d=new Q.Placemark(i,{balloonContent:o,id:a},{draggable:!0,preset:"islands#whiteStretchyIcon"})).events.add("dragend",he),p={name:o,coords:i,id:a,placemark:d},u.next=29,Object(fe.c)(B(p));case 29:return n.geoObjects.add(d),u.next=32,Object(fe.b)(xe);case 32:case"end":return u.stop()}},Ee,this)}function Le(e){var a,t,n;return me.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(fe.d)(function(e){return e.mapReducer});case 2:return a=r.sent,t=a.map,n=e.payload,r.next=7,t.geoObjects.remove(n.placemark);case 7:return r.next=9,Object(fe.b)(xe);case 9:case"end":return r.stop()}},ge,this)}function xe(){var e,a;return me.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(fe.d)(function(e){return e.placesListReducer.placesList.map(function(e){return e.coords})});case 2:return e=t.sent,t.next=5,Object(fe.d)(function(e){return{polyLine:e.mapReducer.polyLine}});case 5:a=t.sent,a.polyLine.geometry.setCoordinates(e);case 8:case"end":return t.stop()}},ve,this)}function we(){return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fe.a)([Object(fe.e)(D,Pe),Object(fe.e)(N,Le),Object(fe.e)(M,xe),Object(fe.e)(w,je),Object(fe.e)(k,xe)]);case 2:case"end":return e.stop()}},Oe,this)}var Ae=Object(ne.createLogger)({reducer:pe}),ke=function(){var e=Object(ce.a)(),a=[e,re.a,Ae],t=[te.a.apply(void 0,a)],n=te.d.apply(void 0,t),c=Object(te.e)(pe,{},n);return function(e){Object.values(r).forEach(e.run.bind(e))}(e),c}();s.a.render(o.a.createElement(l.a,{store:ke},o.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[135,1,2]]]);
//# sourceMappingURL=main.db0becd5.chunk.js.map